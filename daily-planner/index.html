<!DOCTYPE html> <html lang="en"> <!-- Head --> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <!-- Metadata, OpenGraph and Schema.org --> <!-- Website verification --> <meta name="google-site-verification" content=""> <!-- Avoid warning on Google Chrome Error with Permissions-Policy header: Origin trial controlled feature not enabled: 'interest-cohort'. see https://stackoverflow.com/a/75119417 --> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <!-- Standard metadata --> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>daily planner | Inyoung Cheong</title> <meta name="author" content="Inyoung Cheong"> <meta name="description" content="A motivational AI partner to help plan your day and tackle postponed tasks with bite-sized actions."> <meta name="keywords" content="Inyoung Cheong, AI, University of Washington, content moderation, free speech, legal research"> <!-- OpenGraph --> <meta property="og:site_name" content="Inyoung Cheong"> <meta property="og:type" content="website"> <meta property="og:title" content="Inyoung Cheong | daily planner"> <meta property="og:url" content="https://inyoungcheong.github.io/daily-planner/"> <meta property="og:description" content="A motivational AI partner to help plan your day and tackle postponed tasks with bite-sized actions."> <meta property="og:locale" content="en"> <!-- Twitter card --> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="daily planner"> <meta name="twitter:description" content="A motivational AI partner to help plan your day and tackle postponed tasks with bite-sized actions."> <!-- Bootstrap & MDB --> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <!-- Bootstrap Table --> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <!-- Fonts & Icons --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Alegreya+Sans+SC:ital,wght@0,400;0,500;0,700;0,800;0,900;1,300;1,400;1,500;1,700;1,800&amp;family=Exo+2:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&amp;family=Mukta+Malar:wght@400;500;600;700&amp;family=Neuton:ital,wght@0,200;0,300;0,400;0,700;0,800;1,400&amp;family=Noto+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;family=Noto+Serif+KR:wght@200;300;400;500;600;700;900&amp;family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;family=Rajdhani:wght@300;400;500;600;700&amp;family=Source+Sans+3:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500;1,600&amp;family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Titillium+Web:ital@0;1&amp;display=swap" rel="stylesheet"> <!-- Code Syntax Highlighting --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/murphy.css" media="" id="highlight_theme_light"> <!-- Styles --> <link rel="shortcut icon" href="/assets/img/favicon.ico"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://inyoungcheong.github.io/daily-planner/"> <!-- Dark Mode --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <!-- Body --> <body class="fixed-top-nav "> <!-- Header --> <header> <!-- Nav Bar --> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Inyoung Cheong</a> <!-- Navbar Toggle --> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <!-- About --> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <!-- Blog --> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <!-- Other pages --> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">apps</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/timer/">fun tracker</a> <a class="dropdown-item" href="/daily-planner/">daily planner</a> </div> </li> <!-- Toogle theme mode --> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <!-- Scrolling Progress Bar --> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <!-- Content --> <div class="container mt-5"> <!-- page.html --> <div class="post"> <header class="post-header"> <h1 class="post-title">daily planner</h1> <p class="post-description">A motivational AI partner to help plan your day and tackle postponed tasks with bite-sized actions.</p> </header> <article> <div class="planner-container"> <div class="chat-header"> <h1>üåü Daily Planning Partner</h1> <p>Let's make today amazing together!</p> <div class="usage-info"> <small>üí° Usage: <span id="usage-count">0</span>/30 messages today</small> </div> </div> <div id="chat-messages" class="chat-messages"> <div class="message bot"> Welcome! I'm your daily planning partner. I'll help you tackle postponed tasks and create actionable plans. Let's start! ‚ú® </div> </div> <div class="chat-input-container"> <input type="text" id="message-input" placeholder="Type your message..."> <button id="send-button">Send</button> </div> <div id="loading" class="loading hidden"> <div class="typing-indicator"> <span></span> <span></span> <span></span> </div> </div> <div id="rate-limit-warning" class="rate-limit-warning hidden"> <p>‚ö†Ô∏è You've reached the daily message limit (30 messages). Please try again tomorrow!</p> <small>This helps manage server costs. Thank you for understanding! üíù</small> </div> </div> <style>.planner-container{max-width:600px;margin:0 auto;padding:20px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}.chat-header{text-align:center;margin-bottom:30px}.chat-header h1{color:#2c3e50;margin-bottom:10px}.usage-info{margin-top:10px;padding:8px 12px;background:#e8f4fd;border:1px solid #bee5eb;border-radius:15px;color:#0c5460;display:inline-block}.chat-messages{min-height:400px;max-height:500px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:12px;padding:20px;margin-bottom:20px;background:#f8f9fa}.message{margin-bottom:15px;padding:12px 16px;border-radius:18px;max-width:80%;word-wrap:break-word;line-height:1.5}.message.user{background:#007bff;color:white;margin-left:auto;text-align:right}.message.bot{background:white;color:#333;border:1px solid #e0e0e0;margin-right:auto}.message.system{background:#f0f0f0;color:#666;text-align:center;font-style:italic;margin:10px auto;max-width:90%}.chat-input-container{display:flex;gap:10px}#message-input{flex:1;padding:12px;border:1px solid #ddd;border-radius:25px;font-size:16px;outline:0}#message-input:focus{border-color:#007bff}#send-button{padding:12px 24px;background:#007bff;color:white;border:0;border-radius:25px;cursor:pointer;font-size:16px;transition:background-color .3s}#send-button:hover:not(:disabled){background:#0056b3}#send-button:disabled{background:#ccc;cursor:not-allowed}.loading{text-align:center;padding:10px}.typing-indicator{display:inline-block}.typing-indicator span{display:inline-block;width:8px;height:8px;border-radius:50%;background:#007bff;margin:0 2px;animation:typing 1.4s infinite}.typing-indicator span:nth-child(2){animation-delay:.2s}.typing-indicator span:nth-child(3){animation-delay:.4s}@keyframes typing{0%,60%,100%{transform:translateY(0);opacity:.5}30%{transform:translateY(-10px);opacity:1}}.rate-limit-warning{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:12px;padding:15px;margin-top:15px;text-align:center}.hidden{display:none}@media(max-width:768px){.planner-container{padding:15px;margin:0 -15px}.chat-messages{min-height:300px;max-height:400px}.message{max-width:90%}}</style> <script>
class DailyPlannerBot {
  constructor() {
    this.chatMessages = document.getElementById('chat-messages');
    this.messageInput = document.getElementById('message-input');
    this.sendButton = document.getElementById('send-button');
    this.loadingElement = document.getElementById('loading');
    this.usageElement = document.getElementById('usage-count');
    this.rateLimitWarning = document.getElementById('rate-limit-warning');
    
    this.conversationId = null;
    this.apiUrl = 'https://working-chatbot-api-production.up.railway.app/api/chat';
    
    // Rate limiting
    this.maxMessages = 30;
    this.usageKey = 'dailyPlanner_usage_' + this.getTodayKey();
    
    this.init();
  }

  getTodayKey() {
    const today = new Date();
    return today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();
  }

  getUsageCount() {
    const stored = localStorage.getItem(this.usageKey);
    return stored ? parseInt(stored) : 0;
  }

  incrementUsage() {
    const current = this.getUsageCount();
    localStorage.setItem(this.usageKey, (current + 1).toString());
    this.updateUsageDisplay();
  }

  updateUsageDisplay() {
    const usage = this.getUsageCount();
    this.usageElement.textContent = usage;
    
    if (usage >= this.maxMessages) {
      this.showRateLimit();
    }
  }

  showRateLimit() {
    this.disableInput();
    this.rateLimitWarning.classList.remove('hidden');
    this.addMessage('You\'ve reached today\'s message limit. See you tomorrow! üåÖ', 'system');
  }

  isRateLimited() {
    return this.getUsageCount() >= this.maxMessages;
  }

  async init() {
    this.setupEventListeners();
    this.updateUsageDisplay();
    
    if (!this.isRateLimited()) {
      this.enableInput();
    } else {
      this.showRateLimit();
    }
  }

  setupEventListeners() {
    this.sendButton.addEventListener('click', () => this.sendMessage());
    this.messageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        this.sendMessage();
      }
    });
  }

  async sendMessage() {
    if (this.isRateLimited()) {
      this.showRateLimit();
      return;
    }

    const message = this.messageInput.value.trim();
    if (!message) return;

    this.addMessage(message, 'user');
    this.messageInput.value = '';
    this.disableInput();

    // Increment usage before API call
    this.incrementUsage();

    try {
      const response = await this.callAPI(message);
      this.addMessage(response.message, 'bot');
      
      // Update conversation ID if provided
      if (response.conversationId) {
        this.conversationId = response.conversationId;
      }
    } catch (error) {
      this.addMessage('Sorry, I encountered an error. Please try again later.', 'bot');
      console.error('Error:', error);
      
      // Show more helpful error message
      if (error.message.includes('429')) {
        this.addMessage('The service is currently busy. Please wait a moment before trying again.', 'system');
      } else if (error.message.includes('500')) {
        this.addMessage('There seems to be a server issue. Please try again in a few minutes.', 'system');
      }
    } finally {
      if (!this.isRateLimited()) {
        this.enableInput();
      }
    }
  }

  async callAPI(message) {
    this.showLoading();
    
    try {
      const response = await fetch(this.apiUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          message,
          conversationId: this.conversationId
        })
      });

      this.hideLoading();

      if (!response.ok) {
        if (response.status === 429) {
          throw new Error('Rate limit exceeded');
        } else if (response.status === 500) {
          throw new Error('Server error');
        } else {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
      }

      return await response.json();
    } catch (error) {
      this.hideLoading();
      throw error;
    }
  }

  addMessage(text, sender) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}`;
    messageDiv.textContent = text;
    
    this.chatMessages.appendChild(messageDiv);
    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
  }

  enableInput() {
    if (!this.isRateLimited()) {
      this.messageInput.disabled = false;
      this.sendButton.disabled = false;
      this.messageInput.focus();
    }
  }

  disableInput() {
    this.messageInput.disabled = true;
    this.sendButton.disabled = true;
  }

  showLoading() {
    this.loadingElement.classList.remove('hidden');
  }

  hideLoading() {
    this.loadingElement.classList.add('hidden');
  }
}

// Initialize the chatbot when page loads
document.addEventListener('DOMContentLoaded', () => {
  new DailyPlannerBot();
});
</script> </article> </div> </div> <!-- Footer --> <footer class="fixed-bottom"> <div class="container mt-0"> ¬© Copyright 2025 Inyoung Cheong. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> &amp; <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. </div> </footer> <!-- JavaScripts --> <!-- jQuery --> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <!-- Bootsrap & MDB scripts --> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <!-- Masonry & imagesLoaded --> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <!-- Medium Zoom JS --> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <!-- Bootstrap Table --> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <!-- Load Common JS --> <script src="/assets/js/no_defer.js"></script> <script defer src="/assets/js/common.js"></script> <script defer src="/assets/js/copy_code.js" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <!-- MathJax --> <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KB3EZ5YVPD"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ window.dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-KB3EZ5YVPD');
  </script> <!-- Scrolling Progress Bar --> <script type="text/javascript">
  /*
   * This JavaScript code has been adapted from the article 
   * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
   * published on the website https://css-tricks.com on the 7th of May, 2014.
   * Couple of changes were made to the original code to make it compatible 
   * with the `al-foio` theme.
   */
  const progressBar = $("#progress");
  /*
   * We set up the bar after all elements are done loading.
   * In some cases, if the images in the page are larger than the intended
   * size they'll have on the page, they'll be resized via CSS to accomodate
   * the desired size. This mistake, however, breaks the computations as the
   * scroll size is computed as soon as the elements finish loading.
   * To account for this, a minimal delay was introduced before computing the
   * values.
   */
  window.onload = function () {
    setTimeout(progressBarSetup, 50);
  };
  /*
   * We set up the bar according to the browser.
   * If the browser supports the progress element we use that.
   * Otherwise, we resize the bar thru CSS styling
   */
  function progressBarSetup() {
    if ("max" in document.createElement("progress")) {
      initializeProgressElement();
      $(document).on("scroll", function() {
        progressBar.attr({ value: getCurrentScrollPosition() });
      });
      $(window).on("resize", initializeProgressElement);
    } else {
      resizeProgressBar();
      $(document).on("scroll", resizeProgressBar);
      $(window).on("resize", resizeProgressBar);
    }
  }
  /*
   * The vertical scroll position is the same as the number of pixels that
   * are hidden from view above the scrollable area. Thus, a value > 0 is
   * how much the user has scrolled from the top
   */
  function getCurrentScrollPosition() {
    return $(window).scrollTop();
  }

  function initializeProgressElement() {
    let navbarHeight = $("#navbar").outerHeight(true);
    $("body").css({ "padding-top": navbarHeight });
    $("progress-container").css({ "padding-top": navbarHeight });
    progressBar.css({ top: navbarHeight });
    progressBar.attr({
      max: getDistanceToScroll(),
      value: getCurrentScrollPosition(),
    });
  }
  /*
   * The offset between the html document height and the browser viewport
   * height will be greater than zero if vertical scroll is possible.
   * This is the distance the user can scroll
   */
  function getDistanceToScroll() {
    return $(document).height() - $(window).height();
  }

  function resizeProgressBar() {
    progressBar.css({ width: getWidthPercentage() + "%" });
  }
  // The scroll ratio equals the percentage to resize the bar
  function getWidthPercentage() {
    return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
  }
</script> </body> </html>